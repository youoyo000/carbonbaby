<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ç¢³è¶³è·¡æ—¥è¨˜ - ä»Šæ—¥çµæœ</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background: #f8fafc;
      font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
    }
    .container.result {
      width: 100%;
      max-width: 1120px;
      margin: 48px auto 0 auto;
      padding: 40px 24px 32px 24px;
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 4px 24px #81c78422;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 38px;
    }
    .result-main {
      flex: 2;
      min-width: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .result-side {
      flex: 1;
      min-width: 260px;
      max-width: 350px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      align-items: stretch;
    }
    .ribbon {
      align-self: flex-end;
      background: linear-gradient(90deg,#ffd54f 70%,#43a047 100%);
      color: #fff; font-weight: bold; font-size:1.07em;
      padding: 7px 22px 7px 16px;
      border-radius: 0 19px 19px 0;
      box-shadow: 0 2px 8px rgba(255,215,64,0.12);
      letter-spacing: 1px;
      margin-bottom: 8px;
      animation: slideIn 1s;
    }
    @keyframes slideIn {from{right:-100px;}to{right:0;}}
    .result-title {
      font-size: 2em;
      font-weight: bold;
      color: #2e7031;
      margin-bottom: 12px;
      letter-spacing: 1px;
      text-align: center;
    }
    .character-area {
      text-align: center;
      margin-bottom: 16px;
    }
    .character-area img {
      width: 110px; height: 110px; border-radius: 50%;
      box-shadow: 0 4px 24px rgba(67,160,71,0.18);
      background: #fff;
      object-fit: cover;
      animation: popin 0.9s;
    }
    @keyframes popin {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1;}
    }
    .score-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: linear-gradient(100deg,#f3f9f7 90%,#e0f2f1 100%);
      border-radius: 16px;
      box-shadow: 0 2px 10px #43a04715;
      padding: 22px 28px 16px 28px;
      margin-bottom: 18px;
      width: 100%;
      max-width: 360px;
    }
    .score-anim {
      font-size: 2.2em; font-weight: bold; color:#43a047;
      letter-spacing: 2px; margin: 0 0 9px 0;
      text-align: center;
    }
    .level-text {
      font-size: 1.15em;
      color: #265a47;
      font-weight: bold;
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 7px;
    }
    .suggestion-area {
      background: #fffbea;
      border-radius: 13px;
      padding: 9px 18px 9px 18px;
      margin: 10px 0 13px 0;
      box-shadow: 0 2px 8px rgba(255,215,64,0.07);
      font-size: 1.07em;
      width: 100%;
      max-width: 700px;
    }
    .accordion {
      margin-bottom: 6px;
      border-radius: 6px;
      overflow: hidden;
      border: 1.2px solid #ffe082;
    }
    .acc-btn {
      background: #fffde7;
      color: #795548;
      cursor: pointer;
      padding: 9px 11px;
      width: 100%;
      text-align: left;
      border: none;
      outline: none;
      font-size: 1.07em;
      font-weight: bold;
      transition: background .17s;
      display: flex; align-items: center; gap: 7px;
    }
    .acc-btn .acc-emoji {font-size:1.23em;}
    .acc-btn.open,.acc-btn:hover {background:#ffecb3;}
    .acc-panel {
      max-height: 0;
      overflow: hidden;
      background: #fffde7;
      transition: max-height .25s cubic-bezier(.4,0,.2,1);
      font-weight: normal;
      font-size: 0.99em;
      color: #6d4c41;
      padding: 0 11px;
    }
    .acc-panel.open {
      padding: 8px 11px 13px 28px;
      max-height: 220px;
      transition: max-height .35s cubic-bezier(.4,0,.2,1);
    }
    .sdg-tags {
      margin-top: 14px; font-size: 1em; text-align: left;
      width: 100%;
      max-width: 700px;
    }
    .sdg {
      display: inline-block;
      background: #e1f5fe;
      color: #1976d2;
      border-radius: 4px;
      padding: 3px 10px;
      margin: 1px 4px 1px 0;
      font-size: 0.98em;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .fun-fact-area {
      background: #e3f2fd;
      color: #1976d2;
      border-radius: 0 12px 12px 0;
      padding: 10px 13px;
      font-size: 1.04em;
      box-shadow: 0 2px 8px rgba(30,136,229,0.06);
      display: flex;
      align-items: center;
      gap: 10px;
      cursor:pointer;
      margin-bottom: 12px;
    }
    .fun-fact-emoji {font-size: 1.3em;}
    .sdg13-info {
      text-align: center;
      font-size: 0.97em;
      color: #1976d2;
      background: #f3f9f7;
      border-radius: 10px;
      padding: 11px 9px;
      margin-bottom: 12px;
    }
    .action-btns {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 13px;
      margin-top: 8px;
    }
    .btn.result-again, .btn.share-btn {
      background: linear-gradient(90deg, #43a047 80%, #ffd54f 100%);
      color: #fff;
      padding: 13px 0;
      font-size: 1.07em;
      font-weight: bold;
      border-radius: 30px;
      text-decoration: none;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(67,160,71,0.10);
      transition: background 0.2s;
      width: 100%;
      text-align: center;
      margin: 0;
    }
    .btn.result-again:hover, .btn.share-btn:hover {
      background: linear-gradient(90deg, #2e7031 70%, #ffd54f 100%);
    }
    .back-link {
      display: block;
      text-align: right;
      color: #388e3c;
      text-decoration: underline;
      margin-top: 15px;
      font-size: 1.05em;
      width: 100%;
    }
    /* éŸ¿æ‡‰å¼ */
    @media (max-width:1000px) {
      .container.result {flex-direction: column; gap: 0;}
      .result-side {max-width: 100%; flex:unset;}
      .result-main {max-width: 100%;}
    }
    @media (max-width:600px) {
      .container.result {padding: 10px 0;}
      .result-title {font-size: 1.35em;}
      .character-area img {width: 78px; height: 78px;}
      .score-anim {font-size: 1.15em;}
    }
  </style>
</head>
<body>
  <div class="container result">
    <!-- å·¦æ¬„ï¼šä¸»å…§å®¹ -->
    <div class="result-main">
      <div class="ribbon" id="ribbon">ä»Šæ—¥æŒ‘æˆ°å®Œæˆ ğŸ‰</div>
      <div class="result-title" id="resultTitle">ğŸŒ± ä»Šæ—¥ç¢³è¶³è·¡æˆæœ</div>
      <div class="character-area">
        <!-- è§’è‰²åœ–ç‰‡æ”¹ç‚º carbonbaby.png -->
        <img id="characterImg" src="carbonbaby.png" alt="è§’è‰²"/>
      </div>
      <div class="score-block">
        <div class="score-anim" id="scoreAnim">ç¢³åˆ†æ•¸ï¼š0</div>
        <div class="level-text" id="levelText"></div>
      </div>
      <div class="suggestion-area" id="suggestionArea">
        <!-- Accordionç”±JSç”¢ç”Ÿ -->
      </div>
      <div class="sdg-tags" id="sdgTags"></div>
    </div>
    <!-- å³æ¬„ï¼šå´é‚Šè³‡è¨Š -->
    <div class="result-side">
      <div class="fun-fact-area" id="funFactArea">
        <span class="fun-fact-emoji">ğŸ’¡</span>
        <span id="funFactText">æ¯æ¸›å°‘ä¸€æ¬¡ç‰›è‚‰é¤ï¼Œç´„ç­‰æ–¼å°‘é–‹è»Š10å…¬é‡Œçš„ç¢³æ’ï¼</span>
      </div>
      <div class="sdg13-info">
        <strong>SDG 13 æ°£å€™è¡Œå‹•ï¼š</strong>
        <span>ä½ ä»Šå¤©çš„é¸æ“‡æ­£åœ¨åƒèˆ‡å…¨çƒæ°¸çºŒç›®æ¨™ï¼</span><br>
        <a href="https://sdgs.un.org/goals/goal13" target="_blank" style="color:#1976d2;text-decoration:underline;">äº†è§£æ›´å¤š</a>
      </div>
      <div class="action-btns">
        <button class="btn share-btn" id="copyBtn">è¤‡è£½çµæœ</button>
        <a class="btn result-again" href="diary.html">å†å¡«ä¸€æ¬¡</a>
      </div>
      <a class="back-link" href="index.html">â† å›é¦–é </a>
    </div>
  </div>
  <script>
    // è¡Œç‚ºå»ºè­°ã€åˆ†æ•¸ã€SDGè¨­å®š
    const actionDetails = {
      walk: {
        emoji:"ğŸš¶â€â™‚ï¸ğŸš´",
        label: "æ­¥è¡Œ/é¨è…³è¸è»Šä¸Šå­¸/ä¸Šç­",
        advice: "ä½ é¸æ“‡äº†æ­¥è¡Œæˆ–é¨è»Šï¼Œå®Œå…¨ä¸ç”¢ç”Ÿç¢³æ’æ”¾ï¼Œè¶…æ£’ï¼å¤šåˆ©ç”¨é€™æ¨£çš„æ–¹å¼ç§»å‹•ï¼Œç¬¦åˆ SDG 13ã€Œæ°£å€™è¡Œå‹•ã€èˆ‡ SDG 11ã€Œæ°¸çºŒåŸå¸‚ã€ç›®æ¨™ã€‚",
        sdg: "SDG 13ã€SDG 11",
        score: -2
      },
      bus: {
        emoji:"ğŸšŒ",
        label: "æ­ä¹˜å¤§çœ¾é‹è¼¸",
        advice: "æ­ä¹˜å…¬è»Šã€æ·é‹ç­‰å¤§çœ¾é‹è¼¸ï¼Œæ¯äººå¹³å‡ç¢³æ’é ä½æ–¼æ±½è»Šï¼Œé©åˆæ—¥å¸¸é€šå‹¤ã€‚é€™æ˜¯é”æˆ SDG 13ã€SDG 11 çš„å¥½æ–¹æ³•ï¼",
        sdg: "SDG 13ã€SDG 11",
        score: -1
      },
      ac: {
        emoji:"â„ï¸",
        label: "ä»Šå¤©å†·æ°£é–‹è¶…é2å°æ™‚",
        advice: "å†·æ°£è€—é›»é«˜ã€ç¢³æ’æ”¾ä¹Ÿå¤šã€‚å»ºè­°èª¿é«˜æº«åº¦åˆ°26-28â„ƒã€æ­é…é›»æ‰‡ã€å®šæœŸæ¸…æ½”æ¿¾ç¶²ï¼Œæ¸›å°‘ç¢³è¶³è·¡ã€‚é€™æœ‰åŠ©æ–¼ SDG 7ã€Œå¯è² æ“”èƒ½æºã€å’Œ SDG 13ã€‚",
        sdg: "SDG 7ã€SDG 13",
        score: 3
      },
      beef: {
        emoji:"ğŸ¥©",
        label: "åƒç‰›è‚‰",
        advice: "ç‰›è‚‰çš„ç¢³è¶³è·¡å¾ˆé«˜ï¼ˆæ¯é¤ç´„2600g COâ‚‚eï¼‰ã€‚å¯è€ƒæ…®æ¸›å°‘ç´…è‚‰æ”å–ã€æ”¹åƒé›è‚‰æˆ–è”¬é£Ÿï¼Œå°æ°£å€™èˆ‡å¥åº·éƒ½æ›´å¥½ï¼Œæ¨å‹• SDG 12ã€Œè² è²¬ä»»æ¶ˆè²»èˆ‡ç”Ÿç”¢ã€å’Œ SDG 13ã€‚",
        sdg: "SDG 12ã€SDG 13",
        score: 2
      },
      vegetarian: {
        emoji:"ğŸ¥—",
        label: "ä¸€é¤åƒç´ ",
        advice: "ç´ é£Ÿé¤é»ç¢³æ’è¼ƒä½ï¼Œæ¸›å°‘è‚‰é¡æ”å–æœ‰åŠ©æ¸›ç·©æ°£å€™è®Šé·ã€‚é€™æ˜¯å¯¦è¸ SDG 13ã€SDG 12 çš„å¥½è¡Œå‹•ï¼",
        sdg: "SDG 13ã€SDG 12",
        score: -1
      },
      recycle: {
        emoji:"â™»ï¸",
        label: "åšè³‡æºå›æ”¶",
        advice: "è³‡æºå›æ”¶èƒ½æ¸›å°‘åƒåœ¾æ©åŸ‹ã€ç„šåŒ–èˆ‡åŸæ–™æ¶ˆè€—ï¼Œé€²è€Œæ¸›ç¢³ã€‚æŒçºŒåšå¥½å›æ”¶ï¼Œæ”¯æŒ SDG 12ã€Œè² è²¬ä»»æ¶ˆè²»èˆ‡ç”Ÿç”¢ã€ï¼",
        sdg: "SDG 12",
        score: -1
      },
      plastic: {
        emoji:"ğŸ¥¤",
        label: "ä½¿ç”¨ä¸€æ¬¡æ€§å¡‘è† é¤å…·",
        advice: "ä¸€æ¬¡æ€§å¡‘è† é›–ç„¶æœ¬èº«ç¢³æ’ä¸é«˜ï¼Œä½†è£½é€ ã€é‹é€å’Œç„šåŒ–åŠ ç¸½èµ·ä¾†å°åœ°çƒä¸å‹å–„ã€‚å»ºè­°æ”¹ç”¨ç’°ä¿é¤å…·ï¼Œæ”¯æŒ SDG 12 å’Œ SDG 13ã€‚",
        sdg: "SDG 12ã€SDG 13",
        score: 1
      }
    };

    // åˆ†æ•¸ç­‰ç´š
    const resultLevels = [
      {
        min: -99, max: 0,
        img: "carbonbaby.png", // è§’è‰²åœ–ç‰‡çµ±ä¸€ç”¨ carbonbaby.png
        text: "å¤ªæ£’äº†ï¼ä½ ä»Šå¤©çš„ç¢³è¶³è·¡å¾ˆä½ï½",
        emoji: "ğŸŒŸ",
        ribbon: "æ¸›ç¢³æ–°æ˜Ÿ"
      },
      {
        min: 1, max: 2,
        img: "carbonbaby.png",
        text: "ä¸éŒ¯å”·ï¼Œé‚„æœ‰é€²æ­¥ç©ºé–“ï¼",
        emoji: "ğŸ™‚",
        ribbon: "ç¹¼çºŒåŠªåŠ›"
      },
      {
        min: 3, max: 99,
        img: "carbonbaby.png",
        text: "ä»Šå¤©ç¢³è¶³è·¡åé«˜å–”ï½",
        emoji: "ğŸ˜…",
        ribbon: "å†æ¥å†å²"
      }
    ];

    // æœ‰è¶£ç’°ä¿çŸ¥è­˜
    const funFacts = [
      "æ¯å°‘åƒä¸€ä»½ç‰›è‚‰é¤ï¼Œç´„ç­‰æ–¼å°‘é–‹è»Š10å…¬é‡Œçš„ç¢³æ’ï¼",
      "å†·æ°£æ¯èª¿é«˜1Â°Cï¼Œå¯çœä¸‹6%ç”¨é›»é‡ã€‚",
      "æ­æ·é‹æ¯”é¨æ©Ÿè»ŠåŒè·é›¢å¯æ¸›ç¢³50%ä»¥ä¸Šï¼",
      "ä½ çŸ¥é“å—ï¼Ÿå…¨å°æ¯äººæ¯å¹´å¡‘è† é¤å…·ç”¨é‡è¶…é700å€‹ï¼",
      "è³‡æºå›æ”¶ä¸€å…¬æ–¤é‹ç½ï¼Œå¯çœä¸‹ç›¸ç•¶è£½é€ æ–°é‹æ‰€éœ€çš„20å€èƒ½é‡ï¼",
      "æ¯é€±ä¸€å¤©å…¨ç´ ï¼Œå¹´æ¸›ç¢³è¶…é50å…¬æ–¤ï¼"
    ];

    // è®€å–é¸é …
    const checked = JSON.parse(localStorage.getItem('carbonActions') || '[]');
    let score = 0;
    let sdgSet = new Set();
    const acts = [];
    checked.forEach(act => {
      if (actionDetails[act]) {
        acts.push(actionDetails[act]);
        score += actionDetails[act].score;
        actionDetails[act].sdg.split('ã€').forEach(s => sdgSet.add(s.trim()));
      }
    });

    // æ‰¾åˆ°åˆ†æ•¸ç­‰ç´š
    let level = resultLevels[1];
    for (let item of resultLevels) {
      if (score >= item.min && score <= item.max) { level = item; break;}
    }

    // è§’è‰²åœ–ã€åˆ†æ•¸å‹•ç•«ã€ç¸½çµ
    document.getElementById('characterImg').src = level.img;
    document.getElementById('resultTitle').innerHTML = `${level.emoji} ä»Šæ—¥ç¢³è¶³è·¡æˆæœ`;
    document.getElementById('levelText').textContent = level.text;
    document.getElementById('ribbon').textContent = "ä»Šæ—¥æŒ‘æˆ°å®Œæˆ ğŸ‰ï½œ" + level.ribbon;

    // åˆ†æ•¸å‹•ç•«
    let shownScore = 0;
    function animScore() {
      if(shownScore != score){
        shownScore += (score>shownScore?1:-1);
        document.getElementById('scoreAnim').textContent = "ç¢³åˆ†æ•¸ï¼š" + (shownScore>0?"+":"") + shownScore;
        setTimeout(animScore,28+Math.abs(score-shownScore)*4);
      }else{
        document.getElementById('scoreAnim').textContent = "ç¢³åˆ†æ•¸ï¼š" + (score>0?"+":"") + score;
      }
    }
    animScore();

    // Accordionç”¢ç”Ÿ
    const sugArea = document.getElementById('suggestionArea');
    if(acts.length){
      acts.forEach((a,i)=>{
        const acc = document.createElement('div');
        acc.className = "accordion";
        acc.innerHTML = `
          <button class="acc-btn" type="button">
            <span class="acc-emoji">${a.emoji}</span>${a.label}
            <span style="margin-left:auto;font-size:1.1em;">â–¼</span>
          </button>
          <div class="acc-panel">${a.advice}</div>
        `;
        sugArea.appendChild(acc);
      });
    }else{
      sugArea.innerHTML = "<div style='padding:19px;text-align:center;'>è«‹æ–¼ä¸Šä¸€é å‹¾é¸ä½ çš„æ—¥å¸¸è¡Œç‚ºï¼</div>";
    }
    // Accordionäº’å‹•
    document.querySelectorAll('.acc-btn').forEach(btn=>{
      btn.onclick = function(){
        const panel = btn.nextElementSibling;
        btn.classList.toggle('open');
        panel.classList.toggle('open');
        if(panel.classList.contains('open')){
          panel.style.maxHeight = panel.scrollHeight+'px';
        }else{
          panel.style.maxHeight = '0';
        }
      };
    });

    // SDG TAG
    document.getElementById('sdgTags').innerHTML = acts.length ?
      `<span>ç›¸é—œSDGç›®æ¨™ï¼š</span> ${Array.from(sdgSet).map(sdg => `<span class="sdg">${sdg}</span>`).join('')}` : "";

    // éš¨æ©Ÿæœ‰è¶£å°çŸ¥è­˜
    function newFunFact() {
      document.getElementById('funFactText').textContent = funFacts[Math.floor(Math.random()*funFacts.length)];
    }
    newFunFact();
    document.getElementById('funFactArea').onclick = newFunFact;

    // åˆ†äº«çµæœ
    document.getElementById('copyBtn').onclick = function() {
      let copyText = `æˆ‘çš„ä»Šæ—¥ç¢³è¶³è·¡åˆ†æ•¸ï¼š${score>0?"+":""}${score}ï½œ${level.text}ï½œæˆ‘ä»Šå¤©çš„ä½ç¢³è¡Œç‚ºæœ‰ï¼š\n` +
        acts.map(a=>`- ${a.label}`).join('\n') + '\nå¿«ä¾†ç¢³è¶³è·¡æ—¥è¨˜ä¸€èµ·æŒ‘æˆ°ï¼';
      navigator.clipboard.writeText(copyText);
      this.textContent = "å·²è¤‡è£½ï¼";
      setTimeout(()=>{this.textContent="è¤‡è£½çµæœ"},1200);
    };
  </script>
</body>
</html>